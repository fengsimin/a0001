<?php
//Copyright (c) 2016 iFeiwu.com
 class Item extends Ifeiwu { public function __construct() { goto SGF5f; SGF5f: if ($this->table) { goto hBhmL; } goto VLujz; KS31j: parent::__construct(); goto fh8YG; VLujz: $this->table = "\x69\x74\145\x6d"; goto vMi2P; vMi2P: hBhmL: goto KS31j; fh8YG: } protected function postPage($request_data) { goto N0xM1; J6hw6: goto g8Sbv; goto I4j93; N0xM1: $this->_callback("\143\141\154\x6c\x62\x61\x63\x6b\x50\x61\147\x65\x42\x65\x66\157\162\145", array(&$request_data)); goto MIy24; v3VZ2: if ($perpage > 0) { goto aJVFX; } goto bUR38; pEwvB: $data = array("\x6c\x69\163\x74" => $list, "\x74\x6f\x74\x61\x6c" => $total, "\160\x65\x72\160\141\x67\145" => $perpage, "\x70\x61\x67\145" => $page); goto Dd24E; cLIAW: $perpage = $request_data["\160\145\162\160\141\147\x65"] ?: 0; goto v3VZ2; HyQ0M: $this->_callback("\x63\141\x6c\154\x62\141\143\x6b\120\141\x67\145\x41\146\x74\x65\162", array(&$data)); goto QXmdt; bUR38: $data = $this->db->select($this->table, $column)->where($where)->order($order)->all(); goto J6hw6; MIy24: $column = $request_data["\143\x6f\154\165\155\x6e"] ?: "\x2a"; goto C88aE; Tjrb4: $page = $request_data["\x70\x61\147\x65"] ?: 1; goto nTbBd; LKjSO: $total = $this->db->select($this->table)->where($where)->count(); goto flL21; gTXAz: $order = $request_data["\x6f\162\x64\x65\x72"] ?: $this->order; goto cLIAW; I4j93: aJVFX: goto Tjrb4; C88aE: $where = $request_data["\x77\150\x65\162\x65"] ?: "\61\40\75\40\x31"; goto gTXAz; nTbBd: $page = $page ? $page - 1 : 0; goto LKjSO; QXmdt: return $this->success($data); goto KZPHn; flL21: $list = $this->db->select($this->table, $column)->where($where)->order($order)->limit(array($page * $perpage, $perpage))->all(); goto pEwvB; Dd24E: g8Sbv: goto HyQ0M; KZPHn: } protected function postQuery($request_data) { goto EmCjF; Hqf1g: T2IaA: goto h30MV; h30MV: return $this->db->query($sql, $request_data["\x76\141\154\165\x65\x73"])->all(); goto HRAfE; J9ef0: if (!(stripos($sql, "\x24\x74\x61\142\154\x65") !== false)) { goto T2IaA; } goto HWq6I; EmCjF: $sql = $request_data["\x73\x71\x6c"]; goto J9ef0; HWq6I: $sql = str_replace("\44\164\x61\142\154\145", $this->prefix . $this->table, $sql); goto Hqf1g; HRAfE: } protected function getOne($id, $column = null) { goto S_DCd; S_DCd: $column = $column ?: "\52"; goto Sdhpo; Sdhpo: $data = $this->db->select($this->table, $column)->where(array("\x69\x64", "\x3d", $id))->get(); goto MoFch; MoFch: return $this->success($data); goto wxYQK; wxYQK: } protected function postAdd($request_data) { goto wP_V2; TbIFf: $this->_removeFiles2($request_data["\x5f\162\x65\x6d\157\x76\x65\146\151\x6c\x65\163"]); goto a7Ra8; gbKiU: $upload_path = $request_data["\44\x75\160\154\x6f\x61\144\x5f\160\x61\164\x68"]; goto hpUIg; SeyRS: $this->_log("\x61\144\144", array("\164\151\164\x6c\x65" => $data["\x74\x69\x74\x6c\x65"], "\164\141\142\154\x65\137\x69\144" => $id)); goto HUpQ0; iHBEO: $udata = array("\x69\144" => $id); goto C9Kbb; a7Ra8: $data = $this->_bulidData($request_data); goto eESxB; bhSgX: $upload_path = $this->_bulidUploadPath($upload_path, $data); goto Azzg6; eESxB: $data["\143\x74\151\x6d\145"] = time(); goto muOaD; xzLnD: $id = $this->db->insert($this->table, $data)->id(); goto aMVgG; HH5Jq: $this->_callback("\143\141\x6c\x6c\x62\x61\143\x6b\101\144\x64\101\x66\164\x65\x72", array($id, &$request_data)); goto SeyRS; zu8K4: MP3ni: goto C_2j1; hndrS: return $this->error("\xe6\267\273\345\212\240\xe6\225\260\xe6\215\256\xe5\xa4\261\350\264\245\357\274\201"); goto R7w_g; aMVgG: if ($id) { goto yX0gk; } goto MJCqD; muOaD: $this->db->beginTransaction(); goto xzLnD; y6Ifq: yT9RO: goto HH5Jq; VTtDQ: if (!($pid > 0 && in_array("\x6c\x65\x76\x65\154", $this->fields))) { goto MP3ni; } goto aZbCY; aZbCY: $udata["\x6c\145\x76\x65\x6c"] = $this->_getLevel($pid, $id); goto zu8K4; wP_V2: $this->_callback("\143\141\154\x6c\x62\141\143\x6b\101\x64\144\x42\145\146\157\162\x65", array(&$request_data)); goto TbIFf; iTUNC: if ($this->db->update($this->table, $udata, array("\151\x64", "\x3d", $id))->is()) { goto yT9RO; } goto S3tUV; HUpQ0: $this->db->commit(); goto fOvJH; fOvJH: return $this->success("\xe6\267\273\xe5\212\xa0\346\x95\xb0\xe6\215\xae\346\210\220\345\x8a\237\357\xbc\x81", array("\x69\x64" => $id, "\151\x6d\141\x67\145\x5f\x70\141\164\150" => $upload_path)); goto junQL; S3tUV: $this->db->rollBack(); goto hndrS; Azzg6: $udata[$upload_name] = $upload_path; goto WGokA; junQL: KHeQj: goto BsLp9; hJUpE: $data["\151\x64"] = $id; goto bhSgX; WGokA: sQhOV: goto iTUNC; C9Kbb: $pid = $data["\x70\151\x64"]; goto VTtDQ; hpUIg: if (!($upload_name && $upload_path)) { goto sQhOV; } goto hJUpE; MJCqD: return $this->error("\xe6\xb7\273\345\x8a\xa0\346\x95\260\xe6\x8d\256\xe5\xa4\xb1\xe8\xb4\245\357\274\x81"); goto ezjya; ezjya: yX0gk: goto iHBEO; C_2j1: $upload_name = $request_data["\x24\165\160\x6c\157\x61\144\x5f\x6e\141\155\145"]; goto gbKiU; R7w_g: goto KHeQj; goto y6Ifq; BsLp9: } protected function postUpdate($id, $request_data) { goto Koxtl; uCtSM: return $this->success("\345\267\xb2\344\xbf\x9d\345\255\230\346\x9b\xb4\xe6\224\xb9\xef\xbc\201"); goto a76uB; KT8EG: $upload_path = $this->_bulidUploadPath($upload_path, $data); goto WTWSc; WTWSc: if (!in_array($upload_name, $this->fields)) { goto B3Q8H; } goto NjVdU; DBgRK: if (!($pid > 0 && in_array("\154\x65\x76\x65\154", $this->fields))) { goto w6U56; } goto AWDbL; ZJwV8: if (!($upload_name && $upload_path)) { goto PZtWx; } goto KT8EG; drkkB: if ($this->db->update($this->table, $data, array("\x69\x64", "\75", $id))->is()) { goto El51J; } goto Y1_hn; qcXft: $upload_name = $request_data["\44\165\x70\x6c\157\x61\x64\x5f\156\141\x6d\145"]; goto qxNxu; NjVdU: $data[$upload_name] = $upload_path; goto WhEZV; Y1_hn: return $this->error("\344\277\235\345\xad\x98\345\244\261\350\264\xa5\357\274\201"); goto RaQeJ; xuO1o: $this->_log("\165\160\x64\141\164\145", array("\164\x69\x74\154\x65" => $data["\164\x69\164\154\145"])); goto uCtSM; S_9Ws: w6U56: goto qcXft; a76uB: sbh3l: goto B6vf6; Koxtl: $this->_callback("\x63\x61\x6c\x6c\x62\141\143\153\x55\160\144\141\x74\x65\x42\x65\146\x6f\x72\x65", array(&$request_data)); goto bcemK; waDZt: PZtWx: goto drkkB; Oicvn: $this->_callback("\143\141\x6c\154\142\141\143\x6b\x55\x70\x64\x61\164\x65\x41\x66\164\145\x72", array($id, &$request_data)); goto xuO1o; fYLqa: $data["\165\x74\151\x6d\x65"] = time(); goto Z2kxB; AWDbL: $data["\x6c\145\166\145\154"] = $this->_getLevel($pid, $id); goto S_9Ws; qxNxu: $upload_path = $request_data["\x24\165\x70\x6c\x6f\141\144\137\160\141\164\x68"]; goto ZJwV8; eW6X_: $data = $this->_bulidData($request_data); goto fYLqa; WhEZV: B3Q8H: goto waDZt; bcemK: $this->_removeFiles2($request_data["\137\x72\x65\155\x6f\x76\x65\x66\x69\154\145\163"]); goto eW6X_; RaQeJ: goto sbh3l; goto xBbJ_; Z2kxB: $pid = $data["\x70\x69\144"]; goto DBgRK; xBbJ_: El51J: goto Oicvn; B6vf6: } protected function postField($request_data) { goto g2a19; SZxt1: return $this->error(); goto yqXMu; g2a19: $ids = $request_data["\151\x64"]; goto uPGnu; g_Zgq: return $this->success(); goto L11T5; L11T5: kmgR2: goto Sf_eA; NCGZP: $value = $request_data["\x76\141\154\x75\x65"]; goto aEp_l; LTpq0: BxX9E: goto g_Zgq; aEp_l: if ($this->db->update($this->table, array($name => $value), array("\151\144", "\111\116", $ids))->is()) { goto BxX9E; } goto SZxt1; uPGnu: $name = $request_data["\x6e\x61\x6d\145"]; goto NCGZP; yqXMu: goto kmgR2; goto LTpq0; Sf_eA: } protected function postCount($request_data) { goto LHVvC; LHVvC: $table = $request_data["\x74\x61\142\154\x65"] ?: $this->table; goto s4n7p; s4n7p: $where = $request_data["\x77\150\145\162\x65"] ?: "\61\40\x3d\x20\x31"; goto OheTX; OheTX: return $this->db->select($table)->where($where)->count(); goto L8kUe; L8kUe: } protected function postDelete($request_data) { goto Yq7PF; af0jX: $ids = $request_data["\x69\x64"]; goto GuJDF; LbYOj: return $this->success(); goto a1usq; S_HbZ: goto tN3SI; goto Swjhk; Vk1Bg: $this->_callback("\x63\x61\x6c\x6c\142\141\x63\153\x44\145\154\x65\164\x65\x41\146\x74\x65\162", array(&$request_data)); goto xLg9E; xLg9E: $this->db->commit(); goto rgZql; GuJDF: $this->db->beginTransaction(); goto z0BLi; LDiHK: jpTry: goto VwteR; TWbwX: return $this->error("\346\234\x89\x20" . count($error) . "\xe6\x9d\241\346\225\260\xe6\x8d\256\xe5\x88\240\351\231\244\345\xa4\xb1\xe8\xb4\245\357\xbc\201"); goto S_HbZ; rgZql: $this->_log("\162\145\x6d\157\x76\x65", array("\x74\x69\164\x6c\145" => count($ids))); goto LbYOj; VwteR: if (count($error) === 0) { goto xbGAs; } goto cghPQ; Yq7PF: $this->_callback("\143\141\154\x6c\x62\141\143\x6b\104\145\154\145\164\x65\102\x65\146\x6f\x72\x65", array(&$request_data)); goto yiXAS; yiXAS: $error = array(); goto af0jX; Swjhk: xbGAs: goto Vk1Bg; cghPQ: $this->db->rollBack(); goto TWbwX; a1usq: tN3SI: goto k3hTv; z0BLi: foreach ($ids as $id) { goto qn3Ns; YyhJA: $error[] = $id; goto FfZ95; bgRxn: VBK48: goto Kvn3Q; UGxiu: if ($this->db->delete($this->table, array("\151\x64", "\x3d", $id))->is()) { goto enZym; } goto YyhJA; qn3Ns: $item = $this->db->select($this->table)->where(array("\x69\x64", "\75", $id))->get(); goto UGxiu; ymGhw: $this->_trash($item, $request_data); goto bgRxn; FfZ95: goto Oa1YE; goto YWvaZ; Kvn3Q: Oa1YE: goto gNJvC; YWvaZ: goto VBK48; goto z3T95; z3T95: enZym: goto ymGhw; gNJvC: } goto LDiHK; k3hTv: } }
