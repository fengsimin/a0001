<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\x73\x69\x74\x65"; parent::__construct(); } protected function getData() { goto BDPBL; NQ8Sr: return $this->success($site); goto n5XlB; XhISb: foreach ($data as $d) { goto W6AcV; jcuKp: r58aJ: goto OCxSC; jJfFZ: gdHRF: goto jcuKp; RUwWN: if (!($value != '')) { goto gdHRF; } goto hxQ1H; hxQ1H: $site[$d["\156\x61\155\x65"]] = $value; goto jJfFZ; W6AcV: $value = $d["\x76\x61\x6c\165\145"]; goto RUwWN; OCxSC: } goto wShaF; BDPBL: $data = $this->db->select($this->table)->all(); goto NP7ma; wShaF: tl9Yj: goto NQ8Sr; NP7ma: $site = array(); goto XhISb; n5XlB: } protected function postSave($request_data) { goto Hb8Zo; ZpMZi: $this->_log("\x75\160\144\x61\x74\x65", array("\164\x69\164\154\145" => "\347\275\x91\xe7\xab\231\350\256\276\347\xbd\xae")); goto gkFah; ufh5W: $this->db->beginTransaction(); goto wrvTb; ThAK4: if (count($error) === 0) { goto p2WUw; } goto WAcMt; ugaZC: goto rikuR; goto jB6AR; jB6AR: p2WUw: goto Jz4tH; Jz4tH: $this->db->commit(); goto ZpMZi; S15xR: $error = array(); goto ufh5W; WAcMt: $this->db->rollBack(); goto btiiW; YzLJA: unset($request_data["\164\157\153\145\156"], $request_data["\x61\x64\155\151\x6e"], $request_data["\137\162\145\155\x6f\166\145\x66\151\x6c\x65\163"]); goto S15xR; Hb8Zo: $this->_removeFiles2($request_data["\137\162\x65\x6d\157\x76\145\146\x69\x6c\145\163"]); goto YzLJA; O4iF2: YuTlj: goto ThAK4; Vpn3T: rikuR: goto iFQvW; gkFah: return $this->success("\xe5\xb7\xb2\xe4\xbf\x9d\345\xad\x98\346\x9b\xb4\xe6\224\xb9\xef\xbc\x81"); goto Vpn3T; btiiW: return $this->error("\xe5\xb7\262\xe4\277\x9d\xe5\xad\230\xe5\244\261\350\264\245\xef\xbc\x81"); goto ugaZC; wrvTb: foreach ($request_data as $name => $value) { goto m2GSh; YsEeo: l1XlK: goto QQa4v; AoMFr: goto l1XlK; goto vFYFM; QQa4v: nBzLK: goto LqrZ0; Mw33r: k3mD4: goto YsEeo; FGUps: $error[] = $name; goto m6ChF; vFYFM: JqfSc: goto lxxaE; U5pge: if (!($this->db->update($this->table, array("\166\141\x6c\165\145" => $value), array("\x6e\x61\155\145", "\x3d", $name))->is() === false)) { goto Vhlh0; } goto FGUps; zSvEZ: $value = $this->_encode($value); goto EdwlN; lxxaE: if (!($this->db->insert($this->table, array("\x6e\141\x6d\x65" => $name, "\166\x61\154\165\145" => $value))->is() === false)) { goto k3mD4; } goto lPNsO; lPNsO: $error[] = $name; goto Mw33r; m6ChF: Vhlh0: goto AoMFr; m2GSh: $count = $this->db->select($this->table)->where(array("\x6e\141\x6d\145", "\x3d", $name))->count(); goto zSvEZ; EdwlN: if ($count <= 0) { goto JqfSc; } goto U5pge; LqrZ0: } goto O4iF2; iFQvW: } protected function postSkin($request_data) { goto fCYfh; EyP1R: $skins = explode("\x2d", $request_data["\164\150\x65\155\145\x2d\163\153\x69\x6e"]); goto uegDA; fXXQm: if (!isset($request_data["\164\x68\145\155\x65\55\x73\x6b\151\156"])) { goto vfc6I; } goto EyP1R; fCYfh: if (!isset($request_data["\163\x74\x79\154\x65\x2d\x63\157\144\145"])) { goto XShlm; } goto RiVG5; R0tnu: vfc6I: goto JGJwS; RiVG5: $filename = "\56\56\57\x61\163\x73\145\x74\x2f\143\x73\x73\57\163\164\x79\154\x65\x2e\x63\x73\163"; goto jQwQZ; gv0kr: chmod($filename, 420); goto B9AvI; W7k1_: UJTVq: goto x4nV4; jQwQZ: file_put_contents($filename, $request_data["\x73\x74\x79\154\x65\x2d\143\157\x64\145"]); goto gv0kr; uegDA: $request_data["\x74\x68\145\155\145"] = $skins[0]; goto Q3yEo; x4nV4: return $this->success("\xe5\267\xb2\xe4\277\235\xe5\xad\230\346\x9b\xb4\xe6\224\xb9\357\xbc\201"); goto sNCgp; Gf8XX: unset($request_data["\x74\157\x6b\x65\x6e"], $request_data["\x61\144\155\151\156"], $request_data["\x73\x74\x79\154\x65\x2d\x63\157\144\145"]); goto fXXQm; Q3yEo: $request_data["\x73\x6b\x69\x6e"] = $skins[1]; goto R0tnu; JGJwS: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\156\x61\x6d\x65" => $name, "\x76\x61\x6c\x75\145" => $value), array("\x6e\141\x6d\x65", "\x3d", $name)); jSfVU: } goto W7k1_; B9AvI: XShlm: goto Gf8XX; sNCgp: } protected function getStyleCode() { $code = file_get_contents("\x2e\56\57\x61\x73\x73\x65\x74\x2f\x63\x73\163\57\163\164\171\x6c\145\56\x63\163\x73"); return $this->success(array($code)); } }
